---
import { Image } from "astro:assets";
import type { CollectionEntry } from "astro:content";
import { getEntry } from "astro:content";

type Props = {
  post: CollectionEntry<"posts">;
};

const { post } = Astro.props;
const { author, description, title, date } = post.data;

const { data: authorData } = await getEntry("team", author.id);
---

<a href={`/blog/${post.slug}`}>
  <article
    class="cursor-pointer rounded-sm border border-blue-200 bg-gray-100 p-3 text-gray-800 shadow-md transition duration-200 ease-in-out hover:bg-gray-200 hover:text-gray-900 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-900 dark:hover:text-gray-300"
  >
    <h2 class="text-2xl font-bold">
      {title}
    </h2>
    <div>
      <Image
        class={"rounded-lg overflow-hidden mr-2 inline-block"}
        src={authorData.headshot}
        alt={authorData.name}
        width={"20"}
        height={"20"}
      />
      <span class="text-sm text-gray-600 dark:text-gray-400">
        By {authorData.name}
      </span>
      <span class="text-sm text-gray-600 dark:text-gray-400">â€¢</span>
      <time
        class="text-sm text-gray-600 dark:text-gray-400"
        datetime={date.toISOString()}
      >
        {
          date.toLocaleDateString("en-US", {
            timeZone: "UTC",
            dateStyle: "medium",
          })
        }
      </time>
    </div>
    <p>{description}</p>
  </article>
</a>
